{% extends "base.html" %}

{% block title %}首页{% endblock %}

{% block outer_css %}
<link
	rel="stylesheet"
	href="{{ url_for('static', filename='css/style.css') }}"
/>
<link
	href="https://cdn.bootcss.com/bootstrap-select/1.13.10/css/bootstrap-select.min.css"
	rel="stylesheet"
/>
{% endblock %}

{% block outer_script %}
<script src="https://cdn.bootcss.com/bootstrap-select/1.13.10/js/bootstrap-select.min.js"></script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}

{% block inner_css %}
<style>
	aside {
		background-color: #f7f9fc;
		min-height: calc(100vh - 81px);
	}

	aside > div:first-child {
		padding: 40px 20px 20px 30px;
	}

	aside > div:first-child > div {
		margin-top: 5px;
	}

	#search-button {
		margin-top: 30px;
		border-color: #007bff;
	}

	main > div {
		padding: 50px 70px 30px 50px;
	}

	div.card-body .row > div:nth-child(odd) {
		text-align: right;
		font-weight: bold;
	}

	div.card-body .row > div:nth-child(even) {
		text-align: left;
	}

	#pager li {
		cursor: pointer;
	}
</style>
{% endblock %}

{% block inner_script %}
<script>
	window.onload = () => {
		$('#go-to-top').on('click', goToTop);
		$('main>div').html(getLoadingHTML);
		$.get("/all_events_intro?page=1", (data) => { showEventsCard(1, data) })
		$('#search-button').on('click', () => {
			$('main>div').html(getLoadingHTML);
			key = $('aside select').find('option:selected').html()
			value = $('#search-input').val();
			$.get(`/events_intro?key=${key}&value=${value}`, (data) => { showEventsCard(1, data) })
		})
	}
</script>
{% endblock %}

{% block main_content %}
	{% include "navbar.html" %}
	<div class="row">
		<aside class="col-3">
			<div>
				<input type="search" id="search-input" class="form-control" placeholder="search..." />
				<select
					class="selectpicker show-tick form-control"
					data-live-search="true"
					title="选择查询依据"
				>
					<option>事件名称</option>
					<option>时间</option>
					<option>客机型号</option>
					<option>航空公司</option>
					<option>航班号</option>
					<option>起飞地点</option>
					<option>降落地点</option>
					<option>出事地点</option>
					<option>事件类型</option>
					<option>航线类型</option>
					<option>航班类型</option>
					<option>天气情况</option>
					<option>操作阶段</option>
					<option>直接原因</option>
					<option>人员伤亡</option>
					<option>结果</option>
					<option>等级</option>
				</select>
				<button type="button" class="btn btn-block" id="search-button">
					查询
				</button>
			</div>
			<div id="go-to-top" class="shadow"><img src="{{ url_for('static', filename='images/go-to-top.svg') }}" alt="go-to-top"></div>
		</aside>
		<main class="col">
			<div class="card-columns"></div>
			<nav id="pager">
				<ul class="pagination justify-content-center"></ul>
			</nav>
		</main>
	</div>
{% endblock %}
